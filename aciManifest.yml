apiVersion: 2019-12-01
location: westeurope
name: mockservice-test
type: Microsoft.ContainerInstance/containerGroups
tags:
  project: product
  component: mockservice
properties:
  osType: Linux
  ipAddress:
    type: Public
    dnsNameLabel: mockservice-test
    ports:
    - protocol: tcp
      port: '80'
  imageRegistryCredentials:
  - server: gocompliant.azurecr.io
    username: gocompliant
    password: NpW67o082TKzxFOnwdYq7QcpBwWhj8/r
  environmentVariables:
    - name: AZ_USERNAME
      value: daniel.varga
    - name: AZ_PERSONAL_ACCESS_TOKEN
      secureValue: lkemq5frba4lkeu6n5fj556jwg2jnap63w3x6pgvegwmki3fn26a
  restartPolicy: OnFailure
  containers:
    - name: mockservice1
      properties:
        image: gocompliant.azurecr.io/smarthub-server:latest
        #command: ['pwsh', '/entrypoint.ps1']
        ports:
          - port: 80
        resources:
          requests:
            cpu: 1.0
            memoryInGB: 1.0